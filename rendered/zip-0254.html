<!DOCTYPE html>
<html>
<head>
    <title>ZIP 254: Deployment of the NU7 Network Upgrade</title>
    <meta charset="utf-8" />
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="css/style.css">
</head>
<body>
<pre><code>ZIP: 254
Title: Deployment of the NU7 Network Upgrade
Owners: Arya &lt;arya@zfnd.org&gt;
Status: Draft
Category: Consensus / Network
Created: 2024-10-31
License: MIT
Discussions-To: &lt;<a href="https://github.com/zcash/zips/issues/839">https://github.com/zcash/zips/issues/839</a>&gt;</code></pre>
<h1 id="terminology">Terminology</h1>
<p>The key word “MUST” in this document are to be interpreted as
described in BCP 14 <a href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a> when, and only when, they appear in
all capitals.</p>
<p>The term “network upgrade” in this document is to be interpreted as
described in ZIP 200 <a href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>.</p>
<p>The terms “Testnet” and “Mainnet” are to be interpreted as described
in section 3.12 of the Zcash Protocol Specification <a href="#fn3"
class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>.</p>
<h1 id="abstract">Abstract</h1>
<p>This proposal defines the deployment of the NU7 network upgrade.</p>
<h1 id="specification">Specification</h1>
<h2 id="nu7-deployment">NU7 deployment</h2>
<p>The primary sources of information about NU7 consensus protocol
changes are:</p>
<ul>
<li>The Zcash Protocol Specification <a href="#fn4" class="footnote-ref"
id="fnref4" role="doc-noteref"><sup>4</sup></a>.</li>
<li>ZIP 200: Network Upgrade Mechanism <a href="#fn5"
class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a>.</li>
</ul>
<p>The network handshake and peer management mechanisms defined in ZIP
201 <a href="#fn6" class="footnote-ref" id="fnref6"
role="doc-noteref"><sup>6</sup></a> also apply to this upgrade.</p>
<p>The following network upgrade constants <a href="#fn7"
class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> are
defined for the NU7 upgrade:</p>
<dl>
<dt>CONSENSUS_BRANCH_ID</dt>
<dd>
<code>0x77190AD8</code>
</dd>
<dt>ACTIVATION_HEIGHT (NU7)</dt>
<dd>
Testnet: TBD
</dd>
<dd>
Mainnet: TBD
</dd>
<dt>MIN_NETWORK_PROTOCOL_VERSION (NU7)</dt>
<dd>
Testnet: <code>170130</code>
</dd>
<dd>
Mainnet: <code>170140</code>
</dd>
</dl>
<p>For each network (Testnet and Mainnet), nodes compatible with NU7
activation on that network MUST advertise a network protocol version
that is greater than or equal to the MIN_NETWORK_PROTOCOL_VERSION (NU7)
for that activation.</p>
<h1 id="backward-compatibility">Backward compatibility</h1>
<p>Prior to the network upgrade activating on each network, NU7 and
pre-NU7 nodes are compatible and can connect to each other. However, NU7
nodes will have a preference for connecting to other NU7 nodes, so
pre-NU7 nodes will gradually be disconnected in the run up to
activation.</p>
<p>Once the network upgrades, even though pre-NU7 nodes can still accept
the numerically larger protocol version used by NU7 as being valid, NU7
nodes will always disconnect peers using lower protocol versions.</p>
<h1 id="references">References</h1>
<section class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><a
href="https://www.rfc-editor.org/info/bcp14">Information on BCP 14 —
“RFC 2119: Key words for use in RFCs to Indicate Requirement Levels” and
“RFC 8174: Ambiguity of Uppercase vs Lowercase in RFC 2119 Key
Words”</a><a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p><a href="zip-0200">ZIP 200:
Network Upgrade Mechanism</a><a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><a
href="protocol/protocol.pdf#networks">Zcash Protocol Specification,
Version 2024.5.1 [NU6]. Section 3.12: Mainnet and Testnet</a><a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p><a href="protocol/protocol.pdf">Zcash
Protocol Specification, Version 2024.5.1 or later</a><a href="#fnref4"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p><a href="zip-0200">ZIP 200:
Network Upgrade Mechanism</a><a href="#fnref5" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p><a href="zip-0201">ZIP 201:
Network Peer Management for Overwinter</a><a href="#fnref6"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p><a href="zip-0200">ZIP 200:
Network Upgrade Mechanism</a><a href="#fnref7" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
